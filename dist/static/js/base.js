window.showMe985211=window.showMe985211||{},showMe985211.base=function(){function t(){this.config,this.schoolList,this.whiteListArr,this.blackListArr,this.init()}return t.prototype.init=function(){var t=this;t.getConfig(),t.getSchoolList(function(){t.getWBList()})},t.prototype.getConfig=function(t){var e=this;e.config&&t&&t(e.config);var n={needSchool:!0,cn:["pro-211"],global:"top-300",manual:"-1",manualContent:"",whitelist:"\u963f\u91cc\u5df4\u5df4,\u817e\u8baf,\u8682\u8681\u91d1\u670d,\u767e\u5ea6,\u6ef4\u6ef4,\u5934\u6761,\u7f8e\u56e2,\u5c0f\u7c73",blacklist:"\u5927\u4e13,\u4e13\u5347\u672c,\u5728\u804c-\u6682\u4e0d\u8003\u8651",autoSayhi:"confirm",edu:"bachelor",age:"-1",ageMin:22,ageMax:0};chrome.storage.sync.get("config",function(o){o=o||{};var r=Object.assign({},n,o.config);o.config||e.setConfig(r),e.config={config:r},t&&t(e.config)})},t.prototype.setConfig=function(t,e){chrome.storage.sync.set({config:t},function(){e&&e(t)})},t.prototype.getSchoolList=function(t){var e=this;e.schoolList&&t&&t(e.schoolList),e.getColleges(function(n){var o=n.cnCollegesData,r=n.globalCollegesData;e.getConfig(function(n){var s=n.config,i=e.getByCollegesConfig(o,r,s)||{};e.schoolList=i,t&&t(i)})})},t.prototype.getWBList=function(t){var e=this;e.getConfig(function(n){var o=n.config;e.whiteListArr=e.splitText(o.whitelist),e.blackListArr=e.splitText(o.blacklist),t&&t(e.whiteListArr,e.blackListArr)})},t.prototype.splitText=function(t){if(!t)return[];var e;return e=t.indexOf(",")>0?t.split(","):t.indexOf(" ")>0?t.split(" "):t.split("\uff0c")},t.prototype.getByCollegesConfig=function(t,e,n){function o(t,e){return e.every(function(e){return t.indexOf(e)!==-1})}function r(t){var e=[];return t.forEach(function(t){t&&e.push({name:t.replace(/\s/g,"")})}),e}function s(t){var e=[];return t.forEach(function(t){e.push(t.name),t.name_en&&e.push(t.name_en)}),e}var i=this,a=[],l=[];if("replace"===n.manual)return a=i.splitText(n.manualContent),{lists:a,items:r(a)};n.cn&&n.cn.length>0&&t.forEach(function(t){o(t.tags,n.cn)&&l.push(t)}),n.global&&"-1"!=n.global&&e.forEach(function(t){o(t.tags,[n.global])&&l.push(t)});var c,u;return"add"===n.manual&&(c=i.splitText(n.manualContent),u=r(c),l=l.concat(u)),{lists:s(l),items:l}},t.prototype.getColleges=function(t){function e(){s.cnCollegesData&&s.globalCollegesData&&(n.result=s,t(s))}var n=this;if(n.result)return t(n.result);var o=chrome.extension.getURL("libs/data/colleges-cn.json"),r=chrome.extension.getURL("libs/data/colleges-global.json"),s={cnCollegesData:!1,globalCollegesData:!1};n.ajax({url:o,success:function(t){s.cnCollegesData=t,e()}}),n.ajax({url:r,success:function(t){s.globalCollegesData=t,e()}})},t.prototype.queryParse=function(t){var e={},n=t||window.location.href;return n.replace(/([^?=&#]+)=([^?=&#]+)/g,function(){e[arguments[1]]=decodeURIComponent(arguments[2])}),e},t.prototype.getParmeter=function(t){var e="";for(var n in t)e=e+n+"="+t[n]+"&";return e.slice(0,-1)},t.prototype.ajax=function(t){if(null==t||"object"!=typeof t)return!1;var e=t.type||"get",n=t.url||location.pathname,o=t.data||{};o=this.getParmeter(o);var r=t.success||function(){},s=new XMLHttpRequest;"get"==e&&(n=n+"?"+o,o=null),s.open(e,n),"post"==e&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(o),s.onreadystatechange=function(){if(200==s.status&&4==s.readyState){var t=null,e=s.getResponseHeader("Content-Type");t=e&&e.indexOf("json")==-1?e.indexOf("xml")!=-1?s.responseXML:s.responseText:JSON.parse(s.responseText),r(t)}}},t.prototype.checkMatch=function(t,e){function n(t){return t.replace(/[\(\)\uff08\uff09]/g,"")}var o=this;if(!o.schoolList||!o.config)return alert("\u83b7\u53d6\u767d\u540d\u5355\u9662\u6821\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u518d\u8bd5\uff01"),{result:!1,message:"\u83b7\u53d6\u767d\u540d\u5355\u9662\u6821\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u518d\u8bd5\uff01"};cfg=Object.assign({isStrict:!0},e);var r=o.config.config;if("-1"!==r.age){var s=t.match(/(\d+)\ *\u5c81/)||[],i=s[1];if(i){if(i=parseInt(i),0!==r.ageMin&&i<r.ageMin)return{result:!1,message:"\u5e74\u9f84\u592a\u5c0f\u5566"};if(0!==r.ageMax&&i>r.ageMax)return{result:!1,message:"\u5e74\u9f84\u592a\u5927\u5566"}}}t=n(t);var a,l=!0;if(r.needWritelist){var c=o.whiteListArr.some(function(e){var n=t.indexOf(e)>-1;return n&&(a="\u5339\u914d\u5230\u767d\u540d\u5355\u5173\u952e\u8bcd\uff1a"+e),n});c&&(l=!1)}if(l)if(r.needSchool){var u=o.schoolList.lists.some(function(e){e=n(e);var o=t.indexOf(e)>-1;return o&&(a="\u5339\u914d\u5230\u9662\u6821\uff1a"+e),o});if(!u)return{result:!1,message:"\u4e0d\u5728\u914d\u7f6e\u7684\u9662\u6821\u767d\u540d\u5355\u5185"}}else a="\u5f53\u524d\u89c4\u5219\u4e3a\u4e0d\u7b5b\u9009\u9662\u6821\uff0c\u5176\u4ed6\u6761\u4ef6\u5747\u7b26\u5408";for(var g=0;g<o.blackListArr.length;g++){var f=o.blackListArr[g];if(t.indexOf(f)>-1)return{result:!1,message:"\u5339\u914d\u5230\u9ed1\u540d\u5355\u5173\u952e\u8bcd\uff1a"+f}}var p={bachelor:function(t){return/\u5b66\u58eb|\u672c\u79d1|\u7855\u58eb|\u535a\u58eb/g.test(t)?{result:!0}:{result:!1,message:"\u4e0d\u5305\u542b\u201c\u672c\u79d1\uff08\u5b66\u58eb\uff09\u3001\u7855\u58eb\u3001\u535a\u58eb\u201d\u7b49\u5b66\u5386\u4fe1\u606f(\u89c4\u5219\u4e3a\u81f3\u5c11\u672c\u79d1)"}},master:function(t){return/\u7855\u58eb|\u535a\u58eb/g.test(t)?{result:!0}:{result:!1,message:"\u4e0d\u5305\u542b\u201c\u7855\u58eb\u3001\u535a\u58eb\u201d\u7b49\u5b66\u5386\u4fe1\u606f(\u89c4\u5219\u4e3a\u81f3\u5c11\u7855\u58eb)"}},doctor:function(t){return/\u535a\u58eb/g.test(t)?{result:!0}:{result:!1,message:"\u4e0d\u5305\u542b\u201c\u535a\u58eb\u201d\u7b49\u5b66\u5386\u4fe1\u606f(\u89c4\u5219\u4e3a\u81f3\u5c11\u535a\u58eb)"}}},h=p[r.edu]||p.bachelor,m=h.call(this,t);return m.result===!1?m:{result:!0,message:a}},t.prototype.getAgeByBrith=function(t){return t=parseInt("19"+t),isNaN(t)?0:(new Date).getFullYear()-t},new t}();