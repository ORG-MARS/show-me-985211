window.showMe985211=window.showMe985211||{},showMe985211.base=function(){function e(){this.config,this.writeList,this.keywordsList,this.init()}return e.prototype.init=function(){var e=this;e.getConfig(),e.getWriteList(function(){e.getWriteKeywordsList()})},e.prototype.getConfig=function(e){var t=this;t.config&&e&&e(t.config);var n={needSchool:!0,cn:["pro-211"],global:"top-300",manual:"-1",manualContent:"",needKeywords:!0,keywordsContent:"\u963f\u91cc\u5df4\u5df4,\u817e\u8baf,\u8682\u8681\u91d1\u670d,\u767e\u5ea6,\u6ef4\u6ef4,\u5934\u6761,\u7f8e\u56e2,\u5c0f\u7c73",autoSayhi:"confirm",edu:"bachelor",age:"-1",ageMin:22,ageMax:0};chrome.storage.sync.get("config",function(o){o=o||{};var r=Object.assign({},n,o.config);o.config||t.setConfig(r),t.config={config:r},e&&e(t.config)})},e.prototype.setConfig=function(e,t){chrome.storage.sync.set({config:e},function(){t&&t(e)})},e.prototype.getWriteList=function(e){var t=this;t.writeList&&e&&e(t.writeList),t.getColleges(function(n){var o=n.cnCollegesData,r=n.globalCollegesData;t.getConfig(function(n){var s=n.config,i=t.getByCollegesConfig(o,r,s)||{};t.writeList=i,e&&e(i)})})},e.prototype.getWriteKeywordsList=function(e){var t=this;t.getConfig(function(n){var o=n.config;t.keywordsList=t.splitText(o.keywordsContent),e&&e(t.keywordsList)})},e.prototype.splitText=function(e){if(!e)return[];var t;return t=e.indexOf(",")>0?e.split(","):e.indexOf(" ")>0?e.split(" "):e.split("\uff0c")},e.prototype.getByCollegesConfig=function(e,t,n){function o(e,t){return t.every(function(t){return e.indexOf(t)!==-1})}function r(e){var t=[];return e.forEach(function(e){e&&t.push({name:e.replace(/\s/g,"")})}),t}function s(e){var t=[];return e.forEach(function(e){t.push(e.name),e.name_en&&t.push(e.name_en)}),t}var i=this,a=[],c=[];if("replace"===n.manual)return a=i.splitText(n.manualContent),{lists:a,items:r(a)};n.cn&&n.cn.length>0&&e.forEach(function(e){o(e.tags,n.cn)&&c.push(e)}),n.global&&"-1"!=n.global&&t.forEach(function(e){o(e.tags,[n.global])&&c.push(e)});var u,l;return"add"===n.manual&&(u=i.splitText(n.manualContent),l=r(u),c=c.concat(l)),{lists:s(c),items:c}},e.prototype.getColleges=function(e){function t(){s.cnCollegesData&&s.globalCollegesData&&(n.result=s,e(s))}var n=this;if(n.result)return e(n.result);var o=chrome.extension.getURL("libs/data/colleges-cn.json"),r=chrome.extension.getURL("libs/data/colleges-global.json"),s={cnCollegesData:!1,globalCollegesData:!1};n.ajax({url:o,success:function(e){s.cnCollegesData=e,t()}}),n.ajax({url:r,success:function(e){s.globalCollegesData=e,t()}})},e.prototype.queryParse=function(e){var t={},n=e||window.location.href;return n.replace(/([^?=&#]+)=([^?=&#]+)/g,function(){t[arguments[1]]=decodeURIComponent(arguments[2])}),t},e.prototype.getParmeter=function(e){var t="";for(var n in e)t=t+n+"="+e[n]+"&";return t.slice(0,-1)},e.prototype.ajax=function(e){if(null==e||"object"!=typeof e)return!1;var t=e.type||"get",n=e.url||location.pathname,o=e.data||{};o=this.getParmeter(o);var r=e.success||function(){},s=new XMLHttpRequest;"get"==t&&(n=n+"?"+o,o=null),s.open(t,n),"post"==t&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(o),s.onreadystatechange=function(){if(200==s.status&&4==s.readyState){var e=null,t=s.getResponseHeader("Content-Type");e=t&&t.indexOf("json")==-1?t.indexOf("xml")!=-1?s.responseXML:s.responseText:JSON.parse(s.responseText),r(e)}}},e.prototype.checkMatch=function(e,t){function n(e){return e.replace(/[\(\)\uff08\uff09]/g,"")}var o=this;if(!o.writeList||!o.config)return alert("\u83b7\u53d6\u767d\u540d\u5355\u9662\u6821\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u518d\u8bd5\uff01"),{result:!1,message:"\u83b7\u53d6\u767d\u540d\u5355\u9662\u6821\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u540e\u518d\u8bd5\uff01"};cfg=Object.assign({isStrict:!0},t);var r=o.config.config;if("-1"!==r.age){var s=e.match(/(\d+)\ *\u5c81/)||[],i=s[1];if(i){if(i=parseInt(i),0!==r.ageMin&&i<r.ageMin)return{result:!1,message:"\u5e74\u9f84\u592a\u5c0f\u5566"};if(0!==r.ageMax&&i>r.ageMax)return{result:!1,message:"\u5e74\u9f84\u592a\u5927\u5566"}}}if(e=n(e),cfg.isStrict&&/\u5927\u4e13/g.test(e))return{result:!1,message:"\u7591\u4f3c\u201c\u5927\u4e13\u201d\u5b66\u5386"};var a,c=!0;if(r.needKeywords){var u=o.keywordsList.some(function(t){var n=e.indexOf(t)>-1;return n&&(a="\u5339\u914d\u5230\u5173\u952e\u8bcd\uff1a"+t),n});u&&(c=!1)}if(c)if(r.needSchool){var l=o.writeList.lists.some(function(t){t=n(t);var o=e.indexOf(t)>-1;return o&&(a="\u5339\u914d\u5230\u9662\u6821\uff1a"+t),o});if(!l)return{result:!1,message:"\u4e0d\u5728\u914d\u7f6e\u7684\u9662\u6821\u767d\u540d\u5355\u5185"}}else a="\u5f53\u524d\u89c4\u5219\u4e3a\u4e0d\u7b5b\u9009\u9662\u6821\uff0c\u5176\u4ed6\u6761\u4ef6\u5747\u7b26\u5408";var g={bachelor:function(e){return/\u5b66\u58eb|\u672c\u79d1|\u7855\u58eb|\u535a\u58eb/g.test(e)?{result:!0}:{result:!1,message:"\u4e0d\u5305\u542b\u201c\u672c\u79d1\uff08\u5b66\u58eb\uff09\u3001\u7855\u58eb\u3001\u535a\u58eb\u201d\u7b49\u5b66\u5386\u4fe1\u606f(\u89c4\u5219\u4e3a\u81f3\u5c11\u672c\u79d1)"}},master:function(e){return/\u7855\u58eb|\u535a\u58eb/g.test(e)?{result:!0}:{result:!1,message:"\u4e0d\u5305\u542b\u201c\u7855\u58eb\u3001\u535a\u58eb\u201d\u7b49\u5b66\u5386\u4fe1\u606f(\u89c4\u5219\u4e3a\u81f3\u5c11\u7855\u58eb)"}},doctor:function(e){return/\u535a\u58eb/g.test(e)?{result:!0}:{result:!1,message:"\u4e0d\u5305\u542b\u201c\u535a\u58eb\u201d\u7b49\u5b66\u5386\u4fe1\u606f(\u89c4\u5219\u4e3a\u81f3\u5c11\u535a\u58eb)"}}},f=g[r.edu]||g.bachelor,p=f.call(this,e);return p.result===!1?p:{result:!0,message:a}},e.prototype.getAgeByBrith=function(e){return e=parseInt("19"+e),isNaN(e)?0:(new Date).getFullYear()-e},new e}();